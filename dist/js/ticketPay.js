const detail=document.querySelector(".detail_info > span"),detail_arrow=document.querySelector(".detail_info > span i"),detail_ul=document.querySelector(".detail_info ul"),user_data=(detail.onclick=function(e){detail_ul.classList.toggle("show"),detail_arrow.classList.toggle("rotate")},document.querySelector(".user_data")),credit_icon=document.querySelector(".credit_icon"),credit_number=document.querySelector(".user_data input"),credit_month=document.querySelector("#expired_month"),credit_year=document.querySelector("#expired_year"),credit_lastNum=document.querySelector("#last_num"),confirm_btn=document.querySelector(".confirm_pay"),card_radio=document.querySelector("#credit_card"),atm_radio=document.querySelector("#atm_account");let creditNum="",lastNum="",span=document.createElement("span"),span1=(user_data.insertBefore(span,credit_icon),span.style.color="red",document.createElement("span"));function checkCreditNum(e){var t=e.target.value;""===t?(span.textContent="此欄位不得為空且為數字",e.target.focus()):16===t.length&&/\d{16}/.test(parseInt(t))?(span.textContent="",creditNum=t,confirm_btn.disabled=!1,confirm_btn.style.cursor="pointer"):(span.textContent="信用卡長度需為16碼數字",e.target.focus(),confirm_btn.disabled=!0,confirm_btn.style.cursor="not-allowed")}function checkLastNum(e){var t;""===e.target.value?(span1.textContent="此欄位不得為空且為數字",credit_lastNum.parentNode.insertBefore(span1,credit_lastNum.nextElementSibling),e.target.focus(),confirm_btn.disabled=!0):(t=e.target.value,console.log(t.length),3===t.length&&/\d{3}/.test(parseInt(t))?(span1.textContent="",(lastNum=t)&&creditNum&&(confirm_btn.disabled=!1,confirm_btn.style.cursor="pointer")):(span1.textContent="數字長度只能三碼",credit_lastNum.parentNode.insertBefore(span1,credit_lastNum.nextElementSibling),e.target.focus(),confirm_btn.disabled=!0,confirm_btn.style.cursor="not-allowed"))}span1.style.color="red",credit_number.addEventListener("blur",checkCreditNum),credit_number.addEventListener("input",checkCreditNum),credit_lastNum.addEventListener("blur",checkLastNum),credit_lastNum.addEventListener("input",checkLastNum),atm_radio.addEventListener("click",()=>{confirm_btn.disabled=!1,console.log(123),confirm_btn.style.cursor="pointer"}),card_radio.addEventListener("click",()=>{confirm_btn.disabled=!0,confirm_btn.style.cursor="not-allowed"});const modal=document.querySelector(".success_modal"),close_btn=document.querySelector(".success_info .close_btn"),btn=document.querySelector(".success_info > button");confirm_btn.addEventListener("click",e=>{credit_lastNum.value="",credit_number.value="",modal.style.display="block"}),close_btn.onclick=function(){modal.style.display="none",location.href="tickets.html"},btn.onclick=function(){modal.style.display="none",location.href="tickets.html"},window.onload=function(){var e=localStorage.getItem("price"),t=JSON.parse(localStorage.getItem("allCount")),n=JSON.parse(localStorage.getItem("ticketType"));document.querySelector(".price").textContent="TWD$"+e,document.querySelector(".total").textContent="TWD$"+e,console.log(t,n);let o="";for(const c in n)""!==n[c]&&(o+=n[c]+"、");e=o.substr(0,o.length-1);console.log(e),document.querySelector(".type").textContent=e;let r=0;for(const l in t)console.log(typeof t[l]),""!==t[l]&&(r+=t[l]);console.log(r),document.querySelector(".num").textContent="X "+r};