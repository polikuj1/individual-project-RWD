const cd=document.querySelectorAll(".cd .pic img"),cdTitle=document.querySelectorAll(".cd .title"),progress_container=document.querySelector(".progress_container"),progress_current=document.querySelector(".current_time");cd.forEach(e=>{e.addEventListener("click",cdRotate)});let angle=[0,0,0,0,0],isRotate=0,interval,isPlay=0,cdOrder;function cdRotate(e){const a=e.target.dataset.cd;cd.forEach((e,t)=>{e.dataset.cd===a&&(cdOrder!==t&&(stopMusic(cdOrder),clearInterval(interval),isRotate=0),cdOrder=t,isPlay=1,txtHover(t),progress_container.style.display="block",0===isRotate?(playMusic(t),isRotate=1,interval=setInterval(function(){angle[t]+=.5,360<angle[t]&&(angle[t]=0),e.style.transform=`rotate(${angle[t]}deg)`},10)):(clearInterval(interval),isRotate=0,isPlay=0,playMusic(t)))})}const audio=[{audio:document.createElement("audio")},{audio:document.createElement("audio")},{audio:document.createElement("audio")},{audio:document.createElement("audio")},{audio:document.createElement("audio")}];let perProgress,playLength=[0,0,0,0,0],totalDuration;function playMusic(a){audio.forEach((e,t)=>{a===t?isPlay?(console.log("開始撥放"),e.audio.play()):(console.log("終止播放"),e.audio.pause()):e.audio.pause()})}function txtHover(a){cdTitle.forEach((e,t)=>{a===t?e.classList.add("title_hover"):e.classList.remove("title_hover")})}function setProgress(e){var t=this.clientWidth,e=e.pageX;audio[cdOrder].audio.currentTime=e/t*totalDuration,playLength[cdOrder]=""+e/t*100,progress_current.style.width=playLength[cdOrder]+"%"}function stopMusic(e){void 0!==e&&0<=e&&e<audio.length&&(console.log("停止播放"),audio[e].audio.pause())}audio.forEach((e,t)=>{e.audio.src=`playlist/${t+1}.mp3`,e.audio.addEventListener("ended",()=>{clearInterval(interval),playLength[cdOrder]=0,isRotate=0,isPlay=0}),e.audio.addEventListener("playing",()=>{cdOrder===t&&(totalDuration=e.audio.duration,perProgress=100/totalDuration)}),e.audio.addEventListener("pause",()=>{console.log(e.audio.currentTime)}),e.audio.addEventListener("timeupdate",()=>{cdOrder===t&&(playLength[cdOrder]=e.audio.currentTime/totalDuration*100,progress_current.style.width=playLength[cdOrder]+"%")})}),progress_container.addEventListener("click",setProgress);