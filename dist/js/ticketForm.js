const detail=document.querySelector(".detail_info > span"),detail_arrow=document.querySelector(".detail_info > span i"),detail_ul=document.querySelector(".detail_info ul"),formInput=(detail.onclick=function(e){detail_ul.classList.toggle("show"),detail_arrow.classList.toggle("rotate")},document.querySelectorAll("form input")),form=document.querySelector("form"),submit=document.querySelector(".submit_btn");submit.onclick=function(e){form.children[1].value="",form.children[4].value="",form.children[7].value="",submit.textContent="頁面跳轉中...",setTimeout(function(){location.href="ticketPay.html"},500)};let userName="",email="",tel="";function formFinish(){userName&&email&&tel?(submit.disabled=!1,submit.style.cursor="pointer"):(submit.disabled=!0,submit.style.cursor="not-allowed")}form.children[1].addEventListener("blur",e=>{""!==e.target.value?(userName=e.target.value,formFinish()):(document.querySelector(".name").textContent="此為必填欄位",form.children[1].focus())}),form.children[1].addEventListener("input",e=>{""!==e.target.value?(userName=e.target.value,document.querySelector(".name").textContent="",formFinish()):(document.querySelector(".name").textContent="此為必填欄位",form.children[1].focus(),submit.disabled=!0,submit.style.cursor="not-allowed")}),form.children[4].addEventListener("blur",e=>{""!==e.target.value?/^\w+@\w+\.\w+/i.test(e.target.value)?(console.log("驗證成功"),document.querySelector(".email").textContent="",email=e.target.value,formFinish()):(console.log("驗證失敗"),document.querySelector(".email").textContent="信箱格式錯誤",e.target.focus()):(document.querySelector(".email").textContent="此為必填欄位",form.children[4].focus())}),form.children[4].addEventListener("input",e=>{""!==e.target.value?/^\w+@\w+\.\w+/i.test(e.target.value)?(console.log("驗證成功"),document.querySelector(".email").textContent="",email=e.target.value,formFinish()):(console.log("驗證失敗"),document.querySelector(".email").textContent="信箱格式錯誤",e.target.focus(),submit.disabled=!0,submit.style.cursor="not-allowed"):(document.querySelector(".email").textContent="此為必填欄位",form.children[4].focus())}),form.children[7].addEventListener("blur",e=>{""!==e.target.value?/^09\d{8}$/.test(e.target.value)?(console.log("驗證成功"),document.querySelector(".tel").textContent="",tel=e.target.value,formFinish()):(console.log("驗證失敗"),document.querySelector(".tel").textContent="手機格式錯誤",e.target.focus()):(document.querySelector(".tel").textContent="此為必填欄位",form.children[7].focus())}),form.children[7].addEventListener("input",e=>{""!==e.target.value?/^09\d{8}$/.test(e.target.value)?(console.log("驗證成功"),document.querySelector(".tel").textContent="",tel=e.target.value,formFinish()):(console.log("驗證失敗"),document.querySelector(".tel").textContent="手機格式錯誤",e.target.focus(),submit.disabled=!0,submit.style.cursor="not-allowed"):(document.querySelector(".tel").textContent="此為必填欄位",form.children[7].focus())}),window.onload=function(){var e=JSON.parse(localStorage.getItem("allCount")),t=JSON.parse(localStorage.getItem("ticketType")),o=(console.log(e,t),[]),l=[];let r=[];var n=[2800,2200,1800];let u=0;for(const i in t)switch(t[i]){case"預售票":o.push(!0),l.push("預售票");break;case"早鳥票":o.push(!0),l.push("早鳥票");break;case"愛心票":o.push(!0),l.push("愛心票");break;default:o.push(!1),l.push("")}for(const s in e)r.push(e[s]);console.log(r),console.log(o);let a="";for(let e=0;e<3;e++)""!==l[e]&&(a+=`<li>
        <span>${l[e]}</span>
        <span>${r[e]}</span>
        <span>TWD$${n[e]}</span>
        </li>
      `);console.log(a),o.forEach((e,t)=>{0===t&&!0===e&&(u+=2800*r[0]),1===t&&!0===e&&(u+=2200*r[1]),2===t&&!0===e&&(u+=1800*r[2])});var c=document.createElement("div");c.innerHTML=a,document.querySelector(".totalPrice").parentNode.parentNode.insertBefore(c,document.querySelector(".totalPrice").parentNode),document.querySelector(".totalPrice").textContent="TWD$"+u,localStorage.setItem("price",u.toString())};